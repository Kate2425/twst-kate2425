<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">

        <title>Update</title>
        <link th:href="@{/style/style.css}" rel="stylesheet">
        <link th:href="@{/style/update.css}" rel="stylesheet">

    </head>

    <body>
        <nav>
            <ul>
                <li><a th:href="@{/edit}">編集</a></li>
            </ul>
        </nav>
        <table>
            <tbody>
                <tr>
                    <th> </th>
                    <th>キャラクター</th>
                    <th>レア度</th>
                    <th>タイプ</th>
                    <th>バディ１</th>
                    <th>バディ２</th>
                    <th>バディ３</th>
                    <th>魔法１</th>
                    <th>魔法２</th>
                    <th>魔法３</th>
                    <th>デュオ</th>
                    <th>初期HP</th>
                    <th>初期ATK</th>
                    <th>最大HP</th>
                    <th>最大ATK</th>
                    <th>バディ１効果</th>
                    <th>バディ２効果</th>
                    <th>バディ３効果</th>
                    <th> </th>
                </tr>
                <th:block th:each="record , st: ${cardList}">
                    <form action="#" th:action="@{/update}"
                        th:name="'cardForm' + ${st.index}" th:method="post">
                        <tr>
                            <input type="hidden" th:name="tableName"
                                th:value="${record.tableName.name}" />
                            <th th:text="${record.id}"></th>
                            <td th:text="${record.name.viewName}">
                            </td>
                            <input type="hidden" name="name"
                                th:value="${record.name.name}" />
                            <td>
                                <select th:name="rare">
                                    <option th:each=" option: ${rare}"
                                        th:value="${option.characterName}"
                                        th:text="${option.viewName}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="type">
                                    <option th:each=" option: ${type}"
                                        th:value="${option.characterName}"
                                        th:text="${option.viewName}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="buddy1">
                                    <option th:each=" option: ${characterName}"
                                        th:value="${option.name}"
                                        th:text="${option.viewName}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="buddy2">
                                    <option th:each=" option: ${characterName}"
                                        th:value="${option.name}"
                                        th:text="${option.viewName}"></option>
                                </select>
                            </td>
                            <td>
                                <select th:name="buddy3">
                                    <option th:each=" option: ${characterName}"
                                        th:value="${option.name}"
                                        th:text="${option.viewName}"></option>
                                </select>
                            </td>
                            <td>
                                <select th:name="magic1Grouping">
                                    <option
                                        th:each=" option: ${magicGroupingList}"
                                        th:value="${option.magicGrouping}"
                                        th:text="${option.name}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="magic2Grouping">
                                    <option
                                        th:each=" option: ${magicGroupingList}"
                                        th:value="${option.magicGrouping}"
                                        th:text="${option.name}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="magic3Grouping">
                                    <option
                                        th:each=" option: ${magicGroupingList}"
                                        th:value="${option.magicGrouping}"
                                        th:text="${option.name}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select th:name="duo">
                                    <option th:each=" option: ${characterName}"
                                        th:value="${option.name}"
                                        th:text="${option.viewName}"></option>
                                </select>
                            </td>
                            <td>
                                <input type="text" th:name="minHp"
                                    th:value="${record.minHp}"
                                    class="textbox" />
                            </td>
                            <td>
                                <input type="text" th:name="minAtk"
                                    th:value="${record.minAtk}"
                                    class="textbox" />
                            </td>
                            <td>
                                <input type="text" th:name="maxHp"
                                    th:value="${record.maxHp}"
                                    class="textbox">
                            </td>
                            <td>
                                <input type="text" th:name="maxAtk"
                                    th:value="${record.maxAtk}"
                                    class="textbox">
                            </td>
                            <td>
                                <select name="buddy1Grouping">
                                    <option
                                        th:each=" option: ${buddyGroupingList}"
                                        th:value="${option.buddyGrouping}"
                                        th:text="${option.effect}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select name="buddy2Grouping">
                                    <option
                                        th:each=" option: ${buddyGroupingList}"
                                        th:value="${option.buddyGrouping}"
                                        th:text="${option.effect}">
                                    </option>
                                </select>
                            </td>
                            <td>
                                <select name="buddy3Grouping">
                                    <option>-</option>
                                    <option
                                        th:each=" option: ${buddyGroupingList}"
                                        th:value="${option.buddyGrouping}"
                                        th:text="${option.effect}">
                                    </option>
                                </select>
                            </td>
                            <td><input type="submit" value="更新"
                                    class="btn submit" /></td>
                        </tr>
                    </form>
                </th:block>
            </tbody>
        </ta>
        <p th:if="${#lists.isEmpty(cardList)}">条件に一致するカードが存在しません</p>
        <p th:if="${validationError}" th:each="error : ${validationError}"></p>
    </body>
</html>